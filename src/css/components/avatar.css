@layer components {
  .fr-avatar {
    --avatar-bg: var(--fr-bg);
    --avatar-size: 2.5rem;
    --avatar-radius: var(--fr-radii);
    --avatar-border: var(--fr-border);
    --avatar-border-o: 4%;

    --avatar-border-computed: color-mix(
      in srgb,
      var(--avatar-border) var(--avatar-border-o),
      transparent
    );

    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    height: var(--avatar-size);
    width: var(--avatar-size);
    background-color: var(--avatar-bg);
    border-radius: var(--avatar-radius);
  }

  .fr-avatar img {
    height: 100%;
    width: 100%;
    object-fit: cover;
    border-radius: var(--fr-radii-sm);
  }

  .fr-avatar-text {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
    width: 100%;
    border-radius: var(--fr-radii-sm);
  }

  /* Rounded variant */
  .fr-avatar-rounded {
    border-radius: 9999px;
  }

  .fr-avatar-rounded img,
  .fr-avatar-rounded .fr-avatar-text {
    border-radius: 9999px;
  }

  /* Bordered variant */
  .fr-avatar-bordered {
    border-width: 0.125rem;
    border-style: solid;
    border-color: var(--avatar-border-computed);
    padding: 0.25rem;
  }

  /* Dot indicator base */
  .fr-avatar-dot::after,
  .fr-avatar-dot-top::after,
  .fr-avatar-dot-top-right::after,
  .fr-avatar-dot-right::after,
  .fr-avatar-dot-bottom::after,
  .fr-avatar-dot-bottom-right::after,
  .fr-avatar-dot-bottom-left::after,
  .fr-avatar-dot-left::after,
  .fr-avatar-dot-top-left::after {
    content: '';
    position: absolute;
    height: var(--dot-size, 0.875rem);
    width: var(--dot-size, 0.875rem);
    border-radius: 9999px;
    border-width: 0.125rem;
    border-style: solid;
    border-color: var(--dot-border, var(--fr-bg));
    background-color: var(--dot-bg, var(--fr-primary));
    z-index: 10;
  }

  /* Dot positions */
  .fr-avatar-dot::after,
  .fr-avatar-dot-bottom-right::after {
    bottom: 0;
    right: 0;
    transform: translate(25%, 25%);
  }

  .fr-avatar-dot-top::after {
    top: 0;
    left: 50%;
    transform: translate(-50%, -50%);
  }

  .fr-avatar-dot-top-right::after {
    top: 0;
    right: 0;
    transform: translate(25%, -25%);
  }

  .fr-avatar-dot-right::after {
    top: 50%;
    right: 0;
    transform: translate(50%, -50%);
  }

  .fr-avatar-dot-bottom::after {
    bottom: 0;
    left: 50%;
    transform: translate(-50%, 50%);
  }

  .fr-avatar-dot-bottom-left::after {
    bottom: 0;
    left: 0;
    transform: translate(-25%, 25%);
  }

  .fr-avatar-dot-left::after {
    top: 50%;
    left: 0;
    transform: translate(-50%, -50%);
  }

  .fr-avatar-dot-top-left::after {
    top: 0;
    left: 0;
    transform: translate(-25%, -25%);
  }

  /* Dot color variants */
  .fr-avatar-dot-danger::after {
    --dot-bg: var(--fr-danger);
  }

  .fr-avatar-dot-warning::after {
    --dot-bg: var(--fr-warning);
  }

  .fr-avatar-dot-success::after {
    --dot-bg: var(--fr-success);
  }

  .fr-avatar-dot-info::after {
    --dot-bg: var(--fr-info);
  }

  .fr-avatar-dot-muted::after {
    --dot-bg: var(--fr-muted-f);
  }
}
